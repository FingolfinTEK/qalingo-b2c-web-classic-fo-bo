#set ($layout = "default/www/default/layout/default.vm")
#set ($page_title = $seoPageTitle)

<link href="${common.themeResourcePrefixPath}/css/slider/slider.css" rel="stylesheet" type="text/css">
<link href="${common.themeResourcePrefixPath}/less/slider/slider.less" rel="stylesheet/less" type="text/css">

<div class="row">
	<!-- category sidebar-->
	<div class="side-bar span3">
		<span class="section-title sidebar-title">Custom search</span>
		<div class="nav-category search-result-custom">
			#if ($facetFieldList.size() > 0 && $facetFieldList[0].values.size() > 0)
			<label>Filter by category</label>
			<!--
		    <select class="filter-category-slt">
				<option value="" selected="selected">Choose a Category</option>
				#foreach($searchResultCatalogCategory in $searchResultCatalogCategories)
				<option #if($filters.cate == $searchResultCatalogCategory.code) selected="selected" #end value="$searchResultCatalogCategory.code">$searchResultCatalogCategory.name</option>	
				#end
			</select>
			-->
			<ul class="filter-category-slt">
				#foreach($facetField in $facetFieldList)
					#foreach($value in $facetField.values)
						<li class="level0 parent">
							<input type="checkbox" checked data-field="$facetField.name" value="$value">&nbsp;$value
						</li>
					#end
				#end
			</ul>
			#end
			<label>Filter by Price</label>
			#set ($priceStart = $price.start)
			#set ($priceEnd = $price.end)
			#if ("$!price.start" == "")
				#set ($priceStart = 0)
			#end
			#if ("$!price.end" == "")
				#set ($priceEnd = 500)
			#end
##			<input type="text" id="price-slider" class="span2" data-slider-min="0" data-slider-max="500" data-slider-step="5" data-slider-value="[$!priceStart,$!priceEnd]" id="sl2">
			
			
			<div class="x-ui-slider x-ui-slider-horizontal">
##				<div class="x-ui-slider-range" style="left: 8%; width: 50%;"></div>
##				<a class="x-ui-slider-handle handle-left" href="#" style="left: 8%;"></a>
##				<a class="x-ui-slider-handle handle-right" href="#" style="left: 58%;"></a>
			</div>				
			<p class="search-price-caption">From <strong> $priceStart$</strong> to <strong>$priceEnd$</strong></p>
			
			<!--
			<p class="search-price-caption">From</p>
			<input type="text" class="filter-category-txt" placeholder="0$">
			<p class="search-price-caption">to </p>
			<input type="text" class="filter-category-txt" placeholder="0$">-->
			<button class="search-result-custom-btn" id="search-filter"><i class="icon-search">&nbsp;</i> Filter</button>
		</div>
		
		<span class="section-title sidebar-title">Recent products</span>
		<ul class="nav-category">
		    <li class="level0 parent">
				<a href="" class="">Odio dignissim 101</a>
			</li>
			<li class="level0 parent">
				<a href="" class="">Odio dignis 800</a>
			</li>		
		    <li class="level0 parent">
				<a href="" class="">Odio dignis A</a>
			</li>
		</ul>
		
		
		<span class="section-title sidebar-title">Your cart</span>
		<ul class="nav-category">
		    <li class="level0 parent">
				<span>There is 0 item(s) in your cart.</span>
			</li>
		</ul>
		
		<a href="" class="sidebar-banner">
			<img src="${common.themeResourcePrefixPath}/img/ads-banner1.jpg" alt="Ads Banner1">
		</a>
	</div>
	<!-- //category sidebar-->
	
	<!-- category product section -->
	<div class="span9">
		<div class="product-section">
			<span class="section-title category-title">Search Result</span>
			<div class="clear border-btm"></div>
			
			<div class="result-head-bar">
				#if ("$!searchText" == "") 
				<h2 class="result-title">$!pagedListHolder.nrOfElements result(s)</h2>
				#end
				#if ("$!searchText" != "")
				<h2 class="result-title">$!pagedListHolder.nrOfElements result(s) for <strong>"$!searchText"</strong></h2>
				#end
				<form id="search-form" class="search-result-form" method="GET" action="$urlSubmitQuickSearch">
					<input type="text" name="text" value="$!searchText" placeholder="$wording.get("fo.search.form_search_label_text")" class="result-search-textbox">
					<button class="result-search-btn"><i class="icon-search">&nbsp;</i></button>
					<input type="hidden" name="pageSize" value="$!pageSize"/>
    				<input type="hidden" name="sortBy" value="$!sortBy"/>
    				<input type="hidden" name="order" value="$!order"/>
					<input type="hidden" id="priceStartParam" name="price.start" value="$!price.start"/>
					<input type="hidden" id="priceEndParam" name="price.end" value="$!price.end"/>
				</form>
			</div>

			<!-- filter-bar -->
			#parse("../../_include/search-result-toolbar.vm")
			<!-- //filter bar -->
			
			
			<ul class="products-grid row list-view">
				#foreach( $searchProductItem in $pagedListHolder.pageList)
				<li class="item span3">
					<a href="#" class="product-image">
						<span><img src="${searchProductItem.carouselImage}" alt="${searchProductItem.i18nName}"></span>
					</a>
					<div class="product-info-wrap">
						<a href="$searchProductItem.productDetailsUrl" class="product-name">${searchProductItem.name}</a>
						<span class="rating-stars star-4">&nbsp;</span>
						<p class="product-short-des hide-as-grid">${searchProductItem.description}</p>
						<p class="product-price">$!searchProductItem.priceWithCurrencySign</p>
						<a href="$searchProductItem.addToCartUrl" class="cart-btn1">
							<i class="icon-shopping-cart"></i>&nbsp;Add to cart</a>
						<a href="#" class="wishlist-btn1">
							<i class="icon-heart"></i>
							<span class="wishlist-btn-des">Add to wishlist</span>
						</a>
					</div>
				</li>
				#end
			</ul>

			<!-- filter bar  -->
			#parse("../../_include/search-result-toolbar.vm")
			<!-- //filter bar -->

		</div>
	</div>
	<!-- //category product section -->
</div>

<script type="text/javascript">
	function startupPage(){
    	$script(['library/jsrender/jsrender.min','page.search-result'], function(){
    		$.qalingo.search({
				params: {
					text: "$!searchText",
					sortBy: "$!sortBy",
					order: "$!order",
					price:{
						start : $priceStart,
						end   : $priceEnd,
						min   : 0,
						max   : 500
					}
##					pageSize: $pagedListHolder.pageSize,
##					page: $pagedListHolder.page
				}
			});
    	});
	}
</script>
<script id="caption" type="text/x-jsrender">
From <strong>{{:priceStart}}$</strong> to <strong> {{:endStart}}$</strong> 
</script>
<!--
<section id="search-result">
	<div class="page-header">
		<h1>${mainContentTitle}</h1>
	</div>
	<form id="searchForm" name="searchForm" action="/sc/search.html" method="POST">
	#springBind("searchForm")
	#if($status.errors.hasErrors()) 
	<div id="errors" class="alert alert-error">
		## Global error messages 
		#foreach($e in $status.errorMessages) 
			<p>${e}</p> 
		#end 
		## Field error messages 
		#foreach($fieldError in $status.errors.fieldErrors) 
			#springBind("searchForm.${fieldError.field}") 
			#foreach($errorMessage in $status.errorMessages) 
				${errorMessage}<br/>
			#end 
		#end 
	</div>
	#end 
	<div>
		<div style="width: 300px; border: 0px solid #B8B6B6; background-color: #ffffff; padding: 10px; float:left;">
			<form id="searchForm" name="searchForm" action="/sc/search.html" method="POST">
				<input type="text" id="text" name="text" value="" style="width: 200px; margin-bottom: 0px;" />
				<button class="btn btn-primary" type="submit" style="margin-top: 0px;">search</button><br/>
				#foreach($facetField in $facetFieldList)
					#foreach($value in $facetField.values)
						<input type="checkbox" id="$facetField.name" value="$value">&nbsp;$value<br/>
					#end
				#end
			</form>
		</div>
		<div style="width: 400px; height: 350px; border: 0px solid #B8B6B6; background-color: #ffffff; padding: 10px; float:left;">
			#parse("../../_include/body-pagination-pagelistholder.vm")
			<div>
				<table class="table" style="width: 100%">
					<thead>
						<tr>
							<th width="100px"></th>
							<th width="250px"></th>
							<th width="50px"></th>
							<th width="50px"></th>
							<th width="50px"></th>
						</tr>
					</thead>
					<tbody>
						#foreach( $searchProductItem in $pagedListHolder.pageList)
						<tr>
							<td>${searchProductItem.name}</td>
							<td>${searchProductItem.description}</td>
							<td></td>
							<td>
								<a class="btn" href="$searchProductItem.productDetailsUrl" alt="">details</a>
							</td>
							<td>
								<a class="btn" href="$searchProductItem.addToCartUrl" alt="">add</a>
							</td>
						</tr>
						#end
					</tbody>  
				</table> 
			</div>
		</div>
	</div>
	</form>
</section>
-->